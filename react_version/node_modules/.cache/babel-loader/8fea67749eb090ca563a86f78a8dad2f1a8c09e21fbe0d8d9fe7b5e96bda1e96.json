{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\Wolfer\\\\react_version\\\\src\\\\context\\\\ConfigContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/context/ConfigContext.js\nimport React, { createContext, useContext, useReducer } from 'react';\n\n// 初始状态，结构尽量接近我们定义的JSON v2\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  time_control: {\n    start_date_str_arr: [\"2001-10-25_00:00:00\"],\n    // 示例默认值\n    end_date_str_arr: [\"2001-10-26_00:00:00\"],\n    // run_duration_str: \"P0DT3H0M0S\", // 或者使用下面的分解\n    run_days: 0,\n    run_hours: 3,\n    run_minutes: 0,\n    run_seconds: 0,\n    interval_seconds_wps: 21600,\n    interval_seconds_input: 10800,\n    history_interval_arr: [3],\n    history_interval_unit_arr: [\"h\"],\n    frames_per_outfile_arr: [1],\n    input_from_file_arr: [true],\n    restart_enabled: false,\n    // 默认不启用重启\n    restart_interval_h: 6,\n    io_form_history: 2,\n    io_form_restart: 2,\n    io_form_input: 2,\n    io_form_boundary: 2,\n    debug_level: 0,\n    nocolons: true,\n    data_source: \"GFS\"\n  },\n  domain_setup: {\n    max_dom: 1,\n    e_we_arr: [100],\n    // 前端页面默认值是100\n    e_sn_arr: [100],\n    dx_arr: [30000],\n    // 前端是30km, 这里存米\n    dy_arr: [30000],\n    map_proj: \"lambert\",\n    ref_lat: 40.0,\n    // 前端默认值是40\n    ref_lon: 116.0,\n    // 前端默认值是116\n    truelat1: 30.0,\n    truelat2: 60.0,\n    stand_lon: 116.0,\n    // 前端默认值是116\n    geog_data_path: \"/path/to/default/geog_on_server\",\n    // 这是一个服务器端路径，前端可能不直接设置\n    time_step: 60,\n    // 前端默认值\n    e_vert_arr: [35],\n    // 默认值\n    feedback_arr: [1],\n    smooth_option_arr: [0],\n    parent_id_arr: [0],\n    // For input, d01 parent_id is 0; for wps, it's 1. This needs careful handling.\n    parent_grid_ratio_arr: [1],\n    i_parent_start_arr: [1],\n    // For input, d01 is 1 (or 0); for wps, it's 1\n    j_parent_start_arr: [1],\n    parent_time_step_ratio_arr: [1]\n  },\n  physics: {\n    mp_physics_arr: [8],\n    // Thompson, 对应前端默认\n    ra_lw_physics_arr: [1],\n    // RRTM, 对应前端默认\n    ra_sw_physics_arr: [1],\n    // Dudhia, 对应前端默认\n    radt_arr: [10],\n    // 对应前端默认值 (如果前端有的话)\n    sf_sfclay_physics_arr: [1],\n    // MMNN (revised), 对应前端默认\n    sf_surface_physics_arr: [2],\n    // Noah, 对应前端默认\n    bl_pbl_physics_arr: [1],\n    // YSU, 对应前端默认\n    bldt_arr: [0],\n    cu_physics_arr: [1],\n    // Kain-Fritsch, _arr 对应前端默认\n    cudt_arr: [5],\n    isfflx: 1,\n    ifsnow: 0,\n    icloud: 1,\n    surface_input_source: 1,\n    num_soil_layers: 4 // Noah 通常是4层\n  },\n  dynamics: {\n    w_damping_arr: [0],\n    // 对应前端damp_opt=0(无阻尼)时w_damping不出现，或damp_opt=1时出现\n    diff_opt_arr: [1],\n    // 对应前端默认\n    km_opt_arr: [4],\n    // 对应前端默认\n    khdif_arr: [0],\n    kvdif_arr: [0],\n    non_hydrostatic_arr: [true],\n    // 对应前端默认\n    rk_ord: 3,\n    damp_opt: 0 // 对应前端默认\n    // zdamp_arr, dampcoef_arr 根据 damp_opt 设置\n  },\n  bdy_control: {\n    spec_bdy_width_arr: [5],\n    spec_zone_arr: [1],\n    relax_zone_arr: [4],\n    specified_arr: [true],\n    nested_arr: [false]\n  },\n  namelist_quilt: {\n    nio_tasks_per_group: 0,\n    nio_groups: 1\n  }\n};\n\n// Reducer function to update state\n// action.type could be 'UPDATE_TIME_CONTROL', 'UPDATE_DOMAIN_SETUP', etc.\n// action.payload would be the new data for that section\nconst configReducer = (state, action) => {\n  switch (action.type) {\n    case 'UPDATE_CONFIG_SECTION':\n      // Generic action to update any top-level key\n      return {\n        ...state,\n        [action.section]: {\n          ...state[action.section],\n          ...action.payload\n        }\n      };\n    case 'SET_FULL_CONFIG':\n      // To load a full config, e.g., from a template\n      return {\n        ...action.payload\n      };\n    default:\n      return state;\n  }\n};\nconst ConfigContext = /*#__PURE__*/createContext();\nexport const ConfigProvider = ({\n  children\n}) => {\n  _s();\n  const [config, dispatch] = useReducer(configReducer, initialState);\n\n  // Function to update a specific section of the config\n  // sectionName should match one of the keys in initialState (e.g., 'time_control')\n  const updateConfigSection = (sectionName, newValues) => {\n    dispatch({\n      type: 'UPDATE_CONFIG_SECTION',\n      section: sectionName,\n      payload: newValues\n    });\n  };\n\n  // You might add more specific update functions if needed\n\n  return /*#__PURE__*/_jsxDEV(ConfigContext.Provider, {\n    value: {\n      config,\n      updateConfigSection,\n      dispatch\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n};\n_s(ConfigProvider, \"RLnvI7ojafB+vBTPhiLeu/xQYZs=\");\n_c = ConfigProvider;\nexport const useConfig = () => {\n  _s2();\n  const context = useContext(ConfigContext);\n  if (context === undefined) {\n    throw new Error('useConfig must be used within a ConfigProvider');\n  }\n  return context;\n};\n_s2(useConfig, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"ConfigProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","jsxDEV","_jsxDEV","initialState","time_control","start_date_str_arr","end_date_str_arr","run_days","run_hours","run_minutes","run_seconds","interval_seconds_wps","interval_seconds_input","history_interval_arr","history_interval_unit_arr","frames_per_outfile_arr","input_from_file_arr","restart_enabled","restart_interval_h","io_form_history","io_form_restart","io_form_input","io_form_boundary","debug_level","nocolons","data_source","domain_setup","max_dom","e_we_arr","e_sn_arr","dx_arr","dy_arr","map_proj","ref_lat","ref_lon","truelat1","truelat2","stand_lon","geog_data_path","time_step","e_vert_arr","feedback_arr","smooth_option_arr","parent_id_arr","parent_grid_ratio_arr","i_parent_start_arr","j_parent_start_arr","parent_time_step_ratio_arr","physics","mp_physics_arr","ra_lw_physics_arr","ra_sw_physics_arr","radt_arr","sf_sfclay_physics_arr","sf_surface_physics_arr","bl_pbl_physics_arr","bldt_arr","cu_physics_arr","cudt_arr","isfflx","ifsnow","icloud","surface_input_source","num_soil_layers","dynamics","w_damping_arr","diff_opt_arr","km_opt_arr","khdif_arr","kvdif_arr","non_hydrostatic_arr","rk_ord","damp_opt","bdy_control","spec_bdy_width_arr","spec_zone_arr","relax_zone_arr","specified_arr","nested_arr","namelist_quilt","nio_tasks_per_group","nio_groups","configReducer","state","action","type","section","payload","ConfigContext","ConfigProvider","children","_s","config","dispatch","updateConfigSection","sectionName","newValues","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useConfig","_s2","context","undefined","Error","$RefreshReg$"],"sources":["E:/Projects/Wolfer/react_version/src/context/ConfigContext.js"],"sourcesContent":["// src/context/ConfigContext.js\r\nimport React, { createContext, useContext, useReducer } from 'react';\r\n\r\n// 初始状态，结构尽量接近我们定义的JSON v2\r\nconst initialState = {\r\n  time_control: {\r\n    start_date_str_arr: [\"2001-10-25_00:00:00\"], // 示例默认值\r\n    end_date_str_arr: [\"2001-10-26_00:00:00\"],\r\n    // run_duration_str: \"P0DT3H0M0S\", // 或者使用下面的分解\r\n    run_days: 0,\r\n    run_hours: 3,\r\n    run_minutes: 0,\r\n    run_seconds: 0,\r\n    interval_seconds_wps: 21600,\r\n    interval_seconds_input: 10800,\r\n    history_interval_arr: [3],\r\n    history_interval_unit_arr: [\"h\"],\r\n    frames_per_outfile_arr: [1],\r\n    input_from_file_arr: [true],\r\n    restart_enabled: false, // 默认不启用重启\r\n    restart_interval_h: 6,\r\n    io_form_history: 2,\r\n    io_form_restart: 2,\r\n    io_form_input: 2,\r\n    io_form_boundary: 2,\r\n    debug_level: 0,\r\n    nocolons: true,\r\n    data_source: \"GFS\"\r\n  },\r\n  domain_setup: {\r\n    max_dom: 1,\r\n    e_we_arr: [100], // 前端页面默认值是100\r\n    e_sn_arr: [100],\r\n    dx_arr: [30000], // 前端是30km, 这里存米\r\n    dy_arr: [30000],\r\n    map_proj: \"lambert\",\r\n    ref_lat: 40.0,    // 前端默认值是40\r\n    ref_lon: 116.0,   // 前端默认值是116\r\n    truelat1: 30.0,\r\n    truelat2: 60.0,\r\n    stand_lon: 116.0, // 前端默认值是116\r\n    geog_data_path: \"/path/to/default/geog_on_server\", // 这是一个服务器端路径，前端可能不直接设置\r\n    time_step: 60, // 前端默认值\r\n    e_vert_arr: [35], // 默认值\r\n    feedback_arr: [1],\r\n    smooth_option_arr: [0],\r\n    parent_id_arr: [0], // For input, d01 parent_id is 0; for wps, it's 1. This needs careful handling.\r\n    parent_grid_ratio_arr: [1],\r\n    i_parent_start_arr: [1], // For input, d01 is 1 (or 0); for wps, it's 1\r\n    j_parent_start_arr: [1],\r\n    parent_time_step_ratio_arr: [1]\r\n  },\r\n  physics: {\r\n    mp_physics_arr: [8], // Thompson, 对应前端默认\r\n    ra_lw_physics_arr: [1], // RRTM, 对应前端默认\r\n    ra_sw_physics_arr: [1], // Dudhia, 对应前端默认\r\n    radt_arr: [10], // 对应前端默认值 (如果前端有的话)\r\n    sf_sfclay_physics_arr: [1], // MMNN (revised), 对应前端默认\r\n    sf_surface_physics_arr: [2], // Noah, 对应前端默认\r\n    bl_pbl_physics_arr: [1], // YSU, 对应前端默认\r\n    bldt_arr: [0],\r\n    cu_physics_arr: [1], // Kain-Fritsch, _arr 对应前端默认\r\n    cudt_arr: [5],\r\n    isfflx: 1,\r\n    ifsnow: 0,\r\n    icloud: 1,\r\n    surface_input_source: 1,\r\n    num_soil_layers: 4 // Noah 通常是4层\r\n  },\r\n  dynamics: {\r\n    w_damping_arr: [0], // 对应前端damp_opt=0(无阻尼)时w_damping不出现，或damp_opt=1时出现\r\n    diff_opt_arr: [1], // 对应前端默认\r\n    km_opt_arr: [4],   // 对应前端默认\r\n    khdif_arr: [0],\r\n    kvdif_arr: [0],\r\n    non_hydrostatic_arr: [true], // 对应前端默认\r\n    rk_ord: 3,\r\n    damp_opt: 0 // 对应前端默认\r\n    // zdamp_arr, dampcoef_arr 根据 damp_opt 设置\r\n  },\r\n  bdy_control: {\r\n    spec_bdy_width_arr: [5],\r\n    spec_zone_arr: [1],\r\n    relax_zone_arr: [4],\r\n    specified_arr: [true],\r\n    nested_arr: [false]\r\n  },\r\n  namelist_quilt: {\r\n    nio_tasks_per_group: 0,\r\n    nio_groups: 1\r\n  }\r\n};\r\n\r\n// Reducer function to update state\r\n// action.type could be 'UPDATE_TIME_CONTROL', 'UPDATE_DOMAIN_SETUP', etc.\r\n// action.payload would be the new data for that section\r\nconst configReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'UPDATE_CONFIG_SECTION': // Generic action to update any top-level key\r\n      return {\r\n        ...state,\r\n        [action.section]: { ...state[action.section], ...action.payload }\r\n      };\r\n    case 'SET_FULL_CONFIG': // To load a full config, e.g., from a template\r\n        return { ...action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst ConfigContext = createContext();\r\n\r\nexport const ConfigProvider = ({ children }) => {\r\n  const [config, dispatch] = useReducer(configReducer, initialState);\r\n\r\n  // Function to update a specific section of the config\r\n  // sectionName should match one of the keys in initialState (e.g., 'time_control')\r\n  const updateConfigSection = (sectionName, newValues) => {\r\n    dispatch({ type: 'UPDATE_CONFIG_SECTION', section: sectionName, payload: newValues });\r\n  };\r\n  \r\n  // You might add more specific update functions if needed\r\n\r\n  return (\r\n    <ConfigContext.Provider value={{ config, updateConfigSection, dispatch }}>\r\n      {children}\r\n    </ConfigContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useConfig = () => {\r\n  const context = useContext(ConfigContext);\r\n  if (context === undefined) {\r\n    throw new Error('useConfig must be used within a ConfigProvider');\r\n  }\r\n  return context;\r\n}; "],"mappings":";;;AAAA;AACA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,UAAU,QAAQ,OAAO;;AAEpE;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,YAAY,GAAG;EACnBC,YAAY,EAAE;IACZC,kBAAkB,EAAE,CAAC,qBAAqB,CAAC;IAAE;IAC7CC,gBAAgB,EAAE,CAAC,qBAAqB,CAAC;IACzC;IACAC,QAAQ,EAAE,CAAC;IACXC,SAAS,EAAE,CAAC;IACZC,WAAW,EAAE,CAAC;IACdC,WAAW,EAAE,CAAC;IACdC,oBAAoB,EAAE,KAAK;IAC3BC,sBAAsB,EAAE,KAAK;IAC7BC,oBAAoB,EAAE,CAAC,CAAC,CAAC;IACzBC,yBAAyB,EAAE,CAAC,GAAG,CAAC;IAChCC,sBAAsB,EAAE,CAAC,CAAC,CAAC;IAC3BC,mBAAmB,EAAE,CAAC,IAAI,CAAC;IAC3BC,eAAe,EAAE,KAAK;IAAE;IACxBC,kBAAkB,EAAE,CAAC;IACrBC,eAAe,EAAE,CAAC;IAClBC,eAAe,EAAE,CAAC;IAClBC,aAAa,EAAE,CAAC;IAChBC,gBAAgB,EAAE,CAAC;IACnBC,WAAW,EAAE,CAAC;IACdC,QAAQ,EAAE,IAAI;IACdC,WAAW,EAAE;EACf,CAAC;EACDC,YAAY,EAAE;IACZC,OAAO,EAAE,CAAC;IACVC,QAAQ,EAAE,CAAC,GAAG,CAAC;IAAE;IACjBC,QAAQ,EAAE,CAAC,GAAG,CAAC;IACfC,MAAM,EAAE,CAAC,KAAK,CAAC;IAAE;IACjBC,MAAM,EAAE,CAAC,KAAK,CAAC;IACfC,QAAQ,EAAE,SAAS;IACnBC,OAAO,EAAE,IAAI;IAAK;IAClBC,OAAO,EAAE,KAAK;IAAI;IAClBC,QAAQ,EAAE,IAAI;IACdC,QAAQ,EAAE,IAAI;IACdC,SAAS,EAAE,KAAK;IAAE;IAClBC,cAAc,EAAE,iCAAiC;IAAE;IACnDC,SAAS,EAAE,EAAE;IAAE;IACfC,UAAU,EAAE,CAAC,EAAE,CAAC;IAAE;IAClBC,YAAY,EAAE,CAAC,CAAC,CAAC;IACjBC,iBAAiB,EAAE,CAAC,CAAC,CAAC;IACtBC,aAAa,EAAE,CAAC,CAAC,CAAC;IAAE;IACpBC,qBAAqB,EAAE,CAAC,CAAC,CAAC;IAC1BC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IAAE;IACzBC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACvBC,0BAA0B,EAAE,CAAC,CAAC;EAChC,CAAC;EACDC,OAAO,EAAE;IACPC,cAAc,EAAE,CAAC,CAAC,CAAC;IAAE;IACrBC,iBAAiB,EAAE,CAAC,CAAC,CAAC;IAAE;IACxBC,iBAAiB,EAAE,CAAC,CAAC,CAAC;IAAE;IACxBC,QAAQ,EAAE,CAAC,EAAE,CAAC;IAAE;IAChBC,qBAAqB,EAAE,CAAC,CAAC,CAAC;IAAE;IAC5BC,sBAAsB,EAAE,CAAC,CAAC,CAAC;IAAE;IAC7BC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IAAE;IACzBC,QAAQ,EAAE,CAAC,CAAC,CAAC;IACbC,cAAc,EAAE,CAAC,CAAC,CAAC;IAAE;IACrBC,QAAQ,EAAE,CAAC,CAAC,CAAC;IACbC,MAAM,EAAE,CAAC;IACTC,MAAM,EAAE,CAAC;IACTC,MAAM,EAAE,CAAC;IACTC,oBAAoB,EAAE,CAAC;IACvBC,eAAe,EAAE,CAAC,CAAC;EACrB,CAAC;EACDC,QAAQ,EAAE;IACRC,aAAa,EAAE,CAAC,CAAC,CAAC;IAAE;IACpBC,YAAY,EAAE,CAAC,CAAC,CAAC;IAAE;IACnBC,UAAU,EAAE,CAAC,CAAC,CAAC;IAAI;IACnBC,SAAS,EAAE,CAAC,CAAC,CAAC;IACdC,SAAS,EAAE,CAAC,CAAC,CAAC;IACdC,mBAAmB,EAAE,CAAC,IAAI,CAAC;IAAE;IAC7BC,MAAM,EAAE,CAAC;IACTC,QAAQ,EAAE,CAAC,CAAC;IACZ;EACF,CAAC;EACDC,WAAW,EAAE;IACXC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACvBC,aAAa,EAAE,CAAC,CAAC,CAAC;IAClBC,cAAc,EAAE,CAAC,CAAC,CAAC;IACnBC,aAAa,EAAE,CAAC,IAAI,CAAC;IACrBC,UAAU,EAAE,CAAC,KAAK;EACpB,CAAC;EACDC,cAAc,EAAE;IACdC,mBAAmB,EAAE,CAAC;IACtBC,UAAU,EAAE;EACd;AACF,CAAC;;AAED;AACA;AACA;AACA,MAAMC,aAAa,GAAGA,CAACC,KAAK,EAAEC,MAAM,KAAK;EACvC,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAK,uBAAuB;MAAE;MAC5B,OAAO;QACL,GAAGF,KAAK;QACR,CAACC,MAAM,CAACE,OAAO,GAAG;UAAE,GAAGH,KAAK,CAACC,MAAM,CAACE,OAAO,CAAC;UAAE,GAAGF,MAAM,CAACG;QAAQ;MAClE,CAAC;IACH,KAAK,iBAAiB;MAAE;MACpB,OAAO;QAAE,GAAGH,MAAM,CAACG;MAAQ,CAAC;IAChC;MACE,OAAOJ,KAAK;EAChB;AACF,CAAC;AAED,MAAMK,aAAa,gBAAG1F,aAAa,CAAC,CAAC;AAErC,OAAO,MAAM2F,cAAc,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC9C,MAAM,CAACC,MAAM,EAAEC,QAAQ,CAAC,GAAG7F,UAAU,CAACkF,aAAa,EAAE/E,YAAY,CAAC;;EAElE;EACA;EACA,MAAM2F,mBAAmB,GAAGA,CAACC,WAAW,EAAEC,SAAS,KAAK;IACtDH,QAAQ,CAAC;MAAER,IAAI,EAAE,uBAAuB;MAAEC,OAAO,EAAES,WAAW;MAAER,OAAO,EAAES;IAAU,CAAC,CAAC;EACvF,CAAC;;EAED;;EAEA,oBACE9F,OAAA,CAACsF,aAAa,CAACS,QAAQ;IAACC,KAAK,EAAE;MAAEN,MAAM;MAAEE,mBAAmB;MAAED;IAAS,CAAE;IAAAH,QAAA,EACtEA;EAAQ;IAAAS,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACa,CAAC;AAE7B,CAAC;AAACX,EAAA,CAhBWF,cAAc;AAAAc,EAAA,GAAdd,cAAc;AAkB3B,OAAO,MAAMe,SAAS,GAAGA,CAAA,KAAM;EAAAC,GAAA;EAC7B,MAAMC,OAAO,GAAG3G,UAAU,CAACyF,aAAa,CAAC;EACzC,IAAIkB,OAAO,KAAKC,SAAS,EAAE;IACzB,MAAM,IAAIC,KAAK,CAAC,gDAAgD,CAAC;EACnE;EACA,OAAOF,OAAO;AAChB,CAAC;AAACD,GAAA,CANWD,SAAS;AAAA,IAAAD,EAAA;AAAAM,YAAA,CAAAN,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}