{"ast":null,"code":"var _jsxFileName = \"/Users/luoxin/Desktop/Research/Wolfer/react_version/src/pages/Domain.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"../components/ui/card\";\nimport { Button } from \"../components/ui/button\";\nimport DomainForm from \"../components/DomainForm\";\nimport { useToast } from \"../hooks/useToast\";\nimport { Alert, AlertDescription, AlertTitle } from \"../components/ui/alert\";\nimport { InfoIcon } from \"lucide-react\";\nimport { DEFAULT_CONFIG } from \"../utils/constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Domain = () => {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [config, setConfig] = useState(null);\n  const [error, setError] = useState(null);\n  const {\n    toast\n  } = useToast();\n  const navigate = useNavigate();\n  useEffect(() => {\n    setLoading(true);\n    try {\n      const savedConfig = localStorage.getItem(\"wrf_config\");\n      if (savedConfig) {\n        const parsedConfig = JSON.parse(savedConfig);\n        setConfig(parsedConfig);\n      } else {\n        // Initialize with default values if no config exists\n        setConfig(DEFAULT_CONFIG);\n      }\n    } catch (err) {\n      console.error(\"Error loading configuration:\", err);\n      setError(\"配置加载失败，请检查浏览器存储。\");\n      setConfig(DEFAULT_CONFIG);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  const handleDomainSubmit = domainData => {\n    try {\n      // Create a new config object with updated domain data\n      const updatedConfig = {\n        ...config,\n        domain: domainData\n      };\n\n      // Save to localStorage\n      localStorage.setItem(\"wrf_config\", JSON.stringify(updatedConfig));\n\n      // Update state\n      setConfig(updatedConfig);\n\n      // Show success message\n      toast({\n        title: \"配置已保存\",\n        description: \"域配置已成功保存。\",\n        variant: \"success\"\n      });\n    } catch (err) {\n      console.error(\"Error saving domain configuration:\", err);\n      toast({\n        title: \"保存失败\",\n        description: \"保存域配置时发生错误。\",\n        variant: \"destructive\"\n      });\n    }\n  };\n  const handleDomainError = errorMessage => {\n    toast({\n      title: \"表单验证错误\",\n      description: errorMessage,\n      variant: \"destructive\"\n    });\n  };\n  const handleBack = () => {\n    navigate(\"/time\");\n  };\n  const handleNext = () => {\n    navigate(\"/physics\");\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-screen\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold mb-2\",\n          children: \"\\u52A0\\u8F7D\\u914D\\u7F6E\\u4E2D...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u8BF7\\u7A0D\\u5019\\uFF0C\\u6B63\\u5728\\u52A0\\u8F7D\\u914D\\u7F6E\\u6570\\u636E\\u3002\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto py-8 px-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold mb-2\",\n      children: \"WRF\\u57DF\\u914D\\u7F6E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-500 mb-6\",\n      children: \"\\u914D\\u7F6EWRF\\u6A21\\u62DF\\u57DF\\u7684\\u5C3A\\u5BF8\\u3001\\u4F4D\\u7F6E\\u548C\\u6295\\u5F71\\u53C2\\u6570\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Alert, {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(InfoIcon, {\n        className: \"h-4 w-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AlertTitle, {\n        children: \"\\u91CD\\u8981\\u63D0\\u793A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AlertDescription, {\n        children: \"\\u57DF\\u914D\\u7F6E\\u662FWRF\\u6A21\\u62DF\\u7684\\u57FA\\u7840\\uFF0C\\u6B63\\u786E\\u7684\\u914D\\u7F6E\\u5BF9\\u4E8E\\u6A21\\u62DF\\u7ED3\\u679C\\u7684\\u51C6\\u786E\\u6027\\u81F3\\u5173\\u91CD\\u8981\\u3002\\u8BF7\\u786E\\u4FDD\\u6240\\u6709\\u53C2\\u6570\\u4E0E\\u60A8\\u7684\\u7814\\u7A76\\u533A\\u57DF\\u76F8\\u5339\\u914D\\u3002\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DomainForm, {\n      onSubmit: handleDomainSubmit,\n      onError: handleDomainError,\n      defaultValues: (config === null || config === void 0 ? void 0 : config.domain) || DEFAULT_CONFIG.domain\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between mt-8\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline\",\n        onClick: handleBack,\n        children: \"\\u8FD4\\u56DE\\u65F6\\u95F4\\u8BBE\\u7F6E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleNext,\n        disabled: !(config !== null && config !== void 0 && config.domain),\n        children: \"\\u4E0B\\u4E00\\u6B65\\uFF1A\\u7269\\u7406\\u53C2\\u6570\\u5316\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n_s(Domain, \"cFY2E98R9wK+HHlgyGcEN+jx4aM=\", false, function () {\n  return [useToast, useNavigate];\n});\n_c = Domain;\nexport default Domain;\nvar _c;\n$RefreshReg$(_c, \"Domain\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Card","CardContent","CardDescription","CardHeader","CardTitle","Button","DomainForm","useToast","Alert","AlertDescription","AlertTitle","InfoIcon","DEFAULT_CONFIG","jsxDEV","_jsxDEV","Domain","_s","loading","setLoading","config","setConfig","error","setError","toast","navigate","savedConfig","localStorage","getItem","parsedConfig","JSON","parse","err","console","handleDomainSubmit","domainData","updatedConfig","domain","setItem","stringify","title","description","variant","handleDomainError","errorMessage","handleBack","handleNext","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onError","defaultValues","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/luoxin/Desktop/Research/Wolfer/react_version/src/pages/Domain.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { \n  Card, \n  CardContent, \n  CardDescription, \n  CardHeader, \n  CardTitle \n} from \"../components/ui/card\";\nimport { Button } from \"../components/ui/button\";\nimport DomainForm from \"../components/DomainForm\";\nimport { useToast } from \"../hooks/useToast\";\nimport { Alert, AlertDescription, AlertTitle } from \"../components/ui/alert\";\nimport { InfoIcon } from \"lucide-react\";\nimport { DEFAULT_CONFIG } from \"../utils/constants\";\n\nconst Domain = () => {\n  const [loading, setLoading] = useState(true);\n  const [config, setConfig] = useState(null);\n  const [error, setError] = useState(null);\n  const { toast } = useToast();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    setLoading(true);\n    try {\n      const savedConfig = localStorage.getItem(\"wrf_config\");\n      if (savedConfig) {\n        const parsedConfig = JSON.parse(savedConfig);\n        setConfig(parsedConfig);\n      } else {\n        // Initialize with default values if no config exists\n        setConfig(DEFAULT_CONFIG);\n      }\n    } catch (err) {\n      console.error(\"Error loading configuration:\", err);\n      setError(\"配置加载失败，请检查浏览器存储。\");\n      setConfig(DEFAULT_CONFIG);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const handleDomainSubmit = (domainData) => {\n    try {\n      // Create a new config object with updated domain data\n      const updatedConfig = {\n        ...config,\n        domain: domainData\n      };\n      \n      // Save to localStorage\n      localStorage.setItem(\"wrf_config\", JSON.stringify(updatedConfig));\n      \n      // Update state\n      setConfig(updatedConfig);\n      \n      // Show success message\n      toast({\n        title: \"配置已保存\",\n        description: \"域配置已成功保存。\",\n        variant: \"success\"\n      });\n    } catch (err) {\n      console.error(\"Error saving domain configuration:\", err);\n      toast({\n        title: \"保存失败\",\n        description: \"保存域配置时发生错误。\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleDomainError = (errorMessage) => {\n    toast({\n      title: \"表单验证错误\",\n      description: errorMessage,\n      variant: \"destructive\"\n    });\n  };\n\n  const handleBack = () => {\n    navigate(\"/time\");\n  };\n\n  const handleNext = () => {\n    navigate(\"/physics\");\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-center\">\n          <h2 className=\"text-xl font-semibold mb-2\">加载配置中...</h2>\n          <p>请稍候，正在加载配置数据。</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto py-8 px-4\">\n      <h1 className=\"text-3xl font-bold mb-2\">WRF域配置</h1>\n      <p className=\"text-gray-500 mb-6\">配置WRF模拟域的尺寸、位置和投影参数</p>\n      \n      <Alert className=\"mb-6\">\n        <InfoIcon className=\"h-4 w-4\" />\n        <AlertTitle>重要提示</AlertTitle>\n        <AlertDescription>\n          域配置是WRF模拟的基础，正确的配置对于模拟结果的准确性至关重要。请确保所有参数与您的研究区域相匹配。\n        </AlertDescription>\n      </Alert>\n\n      <DomainForm \n        onSubmit={handleDomainSubmit} \n        onError={handleDomainError}\n        defaultValues={config?.domain || DEFAULT_CONFIG.domain} \n      />\n      \n      <div className=\"flex justify-between mt-8\">\n        <Button \n          variant=\"outline\" \n          onClick={handleBack}\n        >\n          返回时间设置\n        </Button>\n        <Button \n          onClick={handleNext}\n          disabled={!config?.domain}\n        >\n          下一步：物理参数化\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default Domain; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}